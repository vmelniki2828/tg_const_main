# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ "–°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò"

## üö® –ü—Ä–æ–±–ª–µ–º–∞
–ö–Ω–æ–ø–∫–∞ "–°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò" –ø—Ä–æ–ø–∞–¥–∞–ª–∞ –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π –±–ª–æ–∫ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥".

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createKeyboardWithBack`** - —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
2. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏** –≤ `createKeyboardWithBack` –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –±–ª–æ–∫–∞
3. **–£–ø—Ä–æ—â–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `createKeyboardWithLoyalty`** - —Ç–µ–ø–µ—Ä—å –æ–Ω–∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç `createKeyboardWithBack`
4. **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã** `createKeyboardWithBack` –Ω–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ

### –ö–æ–¥ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

```javascript
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
async function createKeyboardWithBack(buttons, userId, currentBlockId) {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ ...
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤–∫–ª—é—á–µ–Ω–∞ –ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ –±–ª–æ–∫–∞
  if (currentBlockId === 'start') {
    try {
      const loyaltyConfig = await LoyaltyConfig.findOne({ botId });
      if (loyaltyConfig && loyaltyConfig.isEnabled) {
        keyboard.push([{ text: 'üéÅ –°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò' }]);
      }
    } catch (error) {
      console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏:', error);
    }
  }
  
  return { keyboard, inlineKeyboard };
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –∫–Ω–æ–ø–∫–∞ "–°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò" –±—É–¥–µ—Ç:
- ‚úÖ **–ü–æ—è–≤–ª—è—Ç—å—Å—è** –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ –≤ –≥–ª–∞–≤–Ω—ã–π –±–ª–æ–∫
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è** –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è** —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –≤–∫–ª—é—á–µ–Ω–∞
- ‚úÖ **–†–∞–±–æ—Ç–∞—Ç—å** –≤–æ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏—è—Ö –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–í–æ–π–¥–∏—Ç–µ –≤ –±–æ—Ç–∞** - –∫–Ω–æ–ø–∫–∞ "–°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò" –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∏–¥–Ω–∞
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ª—é–±–æ–π –±–ª–æ–∫** (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–≤–∏–∑)
3. **–ù–∞–∂–º–∏—Ç–µ "–ù–∞–∑–∞–¥"** - –∫–Ω–æ–ø–∫–∞ "–°–ò–°–¢–ï–ú–ê –õ–û–Ø–õ–¨–ù–û–°–¢–ò" –¥–æ–ª–∂–Ω–∞ –æ—Å—Ç–∞—Ç—å—Å—è
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - –∫–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

- **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –∫–Ω–æ–ø–∫–∞ –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –±–ª–æ–∫–µ
- **–£–¥–æ–±—Å—Ç–≤–æ** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ –Ω–∞–π—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É
