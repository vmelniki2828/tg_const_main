# üóëÔ∏è –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É–¥–∞–ª–µ–Ω–∏—é –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∫–≤–∏–∑–æ–≤

## üìã –û–ø–∏—Å–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª—ã —Å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏ –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–ª—É—á–∞—è—Ö:

### 1Ô∏è‚É£ –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–≤–∏–∑–∞
- –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—è–µ—Ç –∫–≤–∏–∑ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª `quiz_{quizId}.csv` –∏–∑ –ø–∞–ø–∫–∏ `backend/promocodes/`

### 2Ô∏è‚É£ –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤–æ–≥–æ CSV —Ñ–∞–π–ª–∞ —Å –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
- –°—Ç–∞—Ä—ã–π —Ñ–∞–π–ª —É–¥–∞–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤–æ–≥–æ
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### `promoCodeManager.js`
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `deleteQuizPromoCodes(quizId)`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –Ω–æ–≤—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —É–¥–∞–ª–µ–Ω–∏—è

#### `server.js`
- –ù–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `DELETE /api/quiz-promocodes/:quizId`
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- –í–æ–∑–≤—Ä–∞—Ç —Å—Ç–∞—Ç—É—Å–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### `FlowEditor.jsx`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `removeBlock()` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ API –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∫–≤–∏–∑–∞

#### `QuizBlock.jsx`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handlePromoCodeUpload()`
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–æ–≤—ã—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```bash
chmod +x test-promo-deletion.sh
./test-promo-deletion.sh
```

### –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```bash
chmod +x update-promo-deletion.sh
./update-promo-deletion.sh
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
backend/
‚îú‚îÄ‚îÄ promocodes/
‚îÇ   ‚îú‚îÄ‚îÄ quiz_123.csv    # –ü—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –∫–≤–∏–∑–∞ —Å ID 123
‚îÇ   ‚îú‚îÄ‚îÄ quiz_456.csv    # –ü—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –∫–≤–∏–∑–∞ —Å ID 456
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ promoCodeManager.js # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞–º–∏
‚îî‚îÄ‚îÄ server.js          # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```

## üîç API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### DELETE /api/quiz-promocodes/:quizId
–£–¥–∞–ª—è–µ—Ç —Ñ–∞–π–ª –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∫–≤–∏–∑–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `quizId` (path) - ID –∫–≤–∏–∑–∞

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "message": "–ü—Ä–æ–º–æ–∫–æ–¥—ã –¥–ª—è –∫–≤–∏–∑–∞ 123 —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã",
  "quizId": "123"
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**: –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã
4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å**: –û–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:
   ```bash
   ./update-promo-deletion.sh
   ```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
   ```bash
   ./test-promo-deletion.sh
   ```

3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìù –õ–æ–≥–∏

–°–∏—Å—Ç–µ–º–∞ –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- `üóëÔ∏è –£–¥–∞–ª–µ–Ω —Ñ–∞–π–ª –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è –∫–≤–∏–∑–∞ {quizId}`
- `‚ÑπÔ∏è –§–∞–π–ª –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è –∫–≤–∏–∑–∞ {quizId} –Ω–µ –Ω–∞–π–¥–µ–Ω`
- `‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞ –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –¥–ª—è –∫–≤–∏–∑–∞ {quizId}`